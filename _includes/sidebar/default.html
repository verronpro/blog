<aside class="home-sidebar" aria-label="Sidebar">
  {% if page.aside and page.aside.toc %}
    <nav class="toc" aria-label="Table of contents">
      <h3>On this page</h3>
      <ul class="toc-list" id="generated-toc">
        <li class="muted">Loading…</li>
      </ul>
    </nav>
    <script>
      (function(){
        // Build a simple TOC from h2/h3 inside .post-content
        var root = document.querySelector('.post-content');
        var list = document.getElementById('generated-toc');
        if (!root || !list) return;
        var headings = root.querySelectorAll('h2, h3');
        if (!headings.length){ list.innerHTML = '<li class="muted">No sections</li>'; return; }
        list.innerHTML = '';
        headings.forEach(function(h){
          // Ensure an id exists to link to
          if (!h.id){
            h.id = h.textContent.toLowerCase().trim()
              .replace(/[^a-z0-9\s-]/g,'')
              .replace(/\s+/g,'-')
              .replace(/-+/g,'-');
          }
          var li = document.createElement('li');
          li.className = h.tagName === 'H3' ? 'toc-level-3' : 'toc-level-2';
          var a = document.createElement('a');
          a.href = '#' + h.id;
          a.textContent = h.textContent;
          li.appendChild(a);
          list.appendChild(li);
        });
      })();
    </script>
  {% endif %}

  <div class="card">
    <h3>About</h3>
    <p>I'm Joseph Verron — software craftsmanship coach and docs‑as‑code practitioner. I help teams build reliable systems and clear documentation.</p>
    <p class="muted" style="margin-top:.5rem">
      <a href="{{ site.baseurl }}/about.html">More about me</a> ·
      <a href="{{ site.baseurl }}/archive.html">Archive</a>
    </p>
  </div>

  <div class="card">
    <h3>Ideas & Ongoing Projects</h3>
    <p>A living list of experiments, small initiatives, and future posts I’d like to tackle.</p>
    <p style="margin-top:.5rem">
      <a href="{{ site.baseurl }}/ideas.html">Explore ideas</a>
    </p>
  </div>
</aside>
